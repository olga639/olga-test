# 技术设计完整发现流程

## 目标
进行全面调研和分析，确保技术设计基于完整、准确和最新的信息。

## 发现步骤

### 1. 需求分析
**将需求映射到技术需求**
- 从EARS格式中提取所有功能需求
- 识别非功能需求（性能、安全、可扩展性）
- 确定技术约束和依赖项
- 列出核心技术挑战

### 2. 现有实施分析
**理解当前系统**（如果修改/扩展）：
- 分析代码库结构和架构模式
- 映射可重用组件、服务、实用程序
- 识别领域边界和数据流
- 记录集成点和依赖项
- 确定方法：扩展vs重构vs包装

### 3. 技术调研
**调查最佳实践和解决方案**：
- **使用WebSearch**查找：
  - 类似问题的最新架构模式
  - 技术栈的行业最佳实践
  - 相关技术的最新更新或更改
  - 常见陷阱和解决方案

- **使用WebFetch**分析：
  - 框架/库的官方文档
  - API参考和使用示例
  - 迁移指南和破坏性更改
  - 性能基准和比较

### 4. 外部依赖项调查
**对于每个外部服务/库**：
- 搜索官方文档和GitHub仓库
- 验证API签名和认证方法
- 检查与现有堆栈的版本兼容性
- 调查速率限制和使用约束
- 查找社区资源和已知问题
- 记录安全考虑
- 注意需要实施调查的任何差距

### 5. 架构模式和边界分析
**评估架构选项**：
- 比较相关模式（MVC、Clean、Hexagonal、事件驱动）
- 评估与现有架构和steering原则的契合度
- 识别领域边界和所有权接缝，以避免团队冲突
- 考虑可扩展性影响和运营关注点
- 评估可维护性和团队专业知识
- 在 `research.md` 中记录首选模式和拒绝的替代方案

### 6. 风险评估
**识别技术风险**：
- 性能瓶颈和扩展限制
- 安全漏洞和攻击向量
- 集成复杂度和耦合
- 技术债务创建vs解决
- 知识差距和培训需求

## 调研指南

### 何时搜索
**始终搜索**：
- 外部API文档和更新
- 认证/授权的安全最佳实践
- 已识别瓶颈的性能优化技术
- 依赖项的最新版本和迁移路径

**如果不确定，则搜索**：
- 特定用例的架构模式
- 数据格式/协议的行业标准
- 合规要求（GDPR、HIPAA等）
- 预期负载的可扩展性方法

### 搜索策略
1. 从官方来源开始（文档、GitHub）
2. 检查最近的博客文章和文章（最近6个月）
3. 查看Stack Overflow的常见问题
4. 调查类似的开源实施

## 输出要求
使用共享模板在 `research.md` 中捕获影响设计决策的所有发现：
- 影响架构、技术对齐和契约的关键见解
- 调研期间发现的约束
- 推荐方法和选定的架构模式及理由
- 拒绝的替代方案和权衡（在设计决策章节中记录）
- 告知组件和接口契约的更新领域边界
- 风险和缓解策略
- 需要在实施期间进一步调查的差距