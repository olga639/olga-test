# 并行任务分析规则

## 目的
提供一致的方法来识别在生成 `tasks.md` 时可以安全并行执行的实施任务。

## 何时考虑任务并行
仅当**所有**以下条件都为真时，才将任务标记为可并行：

1. **无数据依赖**于待处理任务。
2. **无冲突文件或共享可变资源**被触及。
3. **无先决条件审查/批准**需要来自另一个任务。
4. **环境/设置工作**此任务所需的工作已经满足或在任务本身内覆盖。

## 标记约定
- 在每个符合条件的任务编号后立即附加 `(P)`。
  - 示例：`- [ ] 2.1 (P) Build background worker for emails`
- 在适当时将 `(P)` 应用于主要任务和子任务。
- 如果请求顺序执行（例如，通过 `--sequential` 标志），完全省略 `(P)` 标记。
- 将 `(P)` 保持在复选框括号**外部**，以避免与完成状态混淆。

## 分组和排序指南
- 当工作属于同一主题时，将并行任务分组在同一父级下。
- 在详细要点中列出明显的先决条件或注意事项（例如，"需要来自1.2的模式迁移"）。
- 当两个任务看起来相似但不可并行安全时，明确指出阻塞依赖。
- 跳过标记仅容器的主要任务（那些没有自己的可操作详细要点的任务）为 `(P)`——改为在子任务级别评估并行执行。

## 质量检查清单
在将任务标记为 `(P)` 之前，确保您已：

- 验证并发运行此任务不会创建合并或部署冲突。
- 在详细要点中捕获任何共享状态期望。
- 确认实施可以独立测试。

如果任何检查失败，**不要**将任务标记为 `(P)`，并在任务详细信息中解释依赖关系。
