<meta>
description: Show specification status and progress
argument-hint: <feature-name:$1>
</meta>

# 规范状态

<background_information>
- **使命**: 显示规范的全面状态和进度
- **成功标准**:
  - 显示当前阶段和完成状态
  - 识别下一步操作和阻塞因素
  - 提供清晰的进度可见性
</background_information>

<instructions>
## 核心任务
为功能 **$1** 生成状态报告，显示所有阶段的进度。

## 执行步骤

### 步骤1：加载规范上下文
- 读取 `.cursor/ssd/specs/$1/spec.json` 以获取元数据和阶段状态
- 读取现有文件: `requirements.md`、`design.md`、`tasks.md`（如果它们存在）
- 检查 `.cursor/ssd/specs/$1/` 目录以查找可用文件

### 步骤2：分析状态

**解析每个阶段**:
- **需求**: 计算需求和验收标准
- **设计**: 检查架构、组件、图表
- **任务**: 计算已完成vs总任务（解析 `- [x]` vs `- [ ]`）
- **批准**: 检查spec.json中的批准状态

### 步骤3：生成报告

以spec.json中指定的语言创建报告，涵盖：
1. **当前阶段和进度**: 规范在工作流中的位置
2. **完成状态**: 每个阶段的完成百分比
3. **任务分解**: 如果任务存在，显示已完成/剩余计数
4. **下一步操作**: 接下来需要做什么
5. **阻塞因素**: 阻止进度的任何问题

## 关键约束
- 使用spec.json中的语言
- 计算准确的完成百分比
- 识别特定的下一步操作命令
</instructions>

## 工具指南
- **读取**: 首先加载spec.json，然后根据需要加载其他规范文件
- **仔细解析**: 从tasks.md复选框提取完成数据
- 使用 **Glob** 检查哪些规范文件存在

## 输出描述

以spec.json中指定的语言提供状态报告：

**报告结构**:
1. **功能概述**: 名称、阶段、最后更新
2. **阶段状态**: 需求、设计、任务及完成百分比
3. **任务进度**: 如果任务存在，显示X/Y已完成
4. **下一步操作**: 要运行的下一个特定命令
5. **问题**: 任何阻塞因素或缺失元素

**格式**: 清晰、可扫描的格式，使用表情符号（✅/⏳/❌）表示状态

## 安全和回退

### 错误场景

**未找到规范**:
- **消息**: "未找到 `$1` 的规范。检查 `.cursor/ssd/specs/` 中的可用规范"
- **操作**: 列出可用的规范目录

**不完整规范**:
- **警告**: 识别哪些文件缺失
- **建议操作**: 指向下一阶段命令

### 列出所有规范

要查看所有可用规范：
- 无参数运行或使用通配符
- 显示 `.cursor/ssd/specs/` 中的所有规范及其状态

